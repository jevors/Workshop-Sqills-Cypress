<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Using Custom Commands · Cypress.io &amp; Javascript basics</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Using Custom Commands · Cypress.io &amp; Javascript basics"/><meta property="og:type" content="website"/><meta property="og:url" content="https://xebia.github.io//cypress-meetup-2018/index.html"/><meta property="og:description" content="Custom commands work well when you’re needing to describe behavior that’s desirable across **all of your tests**. These are **reusable functions** that you can execute multiple times in your test without rewriting the steps, but by feeding different data to it."/><link rel="shortcut icon" href="/cypress-meetup-2018/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/cypress-meetup-2018/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/cypress-meetup-2018/"><img class="logo" src="/cypress-meetup-2018/img/cy.png"/><h2 class="headerTitle">Cypress.io &amp; Javascript basics</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/cypress-meetup-2018/docs/introduction.html" target="_self">Home</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Exercises Part-two</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Install &amp; Setup</h3><ul><li class="navListItem"><a class="navItem" href="/cypress-meetup-2018/docs/introduction.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/cypress-meetup-2018/docs/project_installation.html">Project Installation</a></li><li class="navListItem"><a class="navItem" href="/cypress-meetup-2018/docs/cypress_installation.html">Cypress Installation</a></li><li class="navListItem"><a class="navItem" href="/cypress-meetup-2018/docs/running.html">Starting the Cypress GUI</a></li><li class="navListItem"><a class="navItem" href="/cypress-meetup-2018/docs/reset_db.html">Reset the database</a></li></ul></div><div class="navGroup navGroupActive"><h3>Exercises Part-one</h3><ul><li class="navListItem"><a class="navItem" href="/cypress-meetup-2018/docs/firstTest.html">Open our application</a></li><li class="navListItem"><a class="navItem" href="/cypress-meetup-2018/docs/add_song.html">Add a new song</a></li><li class="navListItem"><a class="navItem" href="/cypress-meetup-2018/docs/edit_song.html">Edit a song</a></li></ul></div><div class="navGroup navGroupActive"><h3>Exercises Part-two</h3><ul><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/cypress-meetup-2018/docs/customcommands.html">Using Custom Commands</a></li><li class="navListItem"><a class="navItem" href="/cypress-meetup-2018/docs/commandline.html">Using the commandline</a></li></ul></div><div class="navGroup navGroupActive"><h3>Next steps</h3><ul><li class="navListItem"><a class="navItem" href="/cypress-meetup-2018/docs/want_more.html">Next Steps</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Using Custom Commands</h1></header><article><div><span><p>Custom commands work well when you’re needing to describe behavior that’s desirable across <strong>all of your tests</strong>. These are <strong>reusable functions</strong> that you can execute multiple times in your test without rewriting the steps, but by feeding different data to it.
Examples in the context of our Tab Tracker application are: 'Login', 'Adding a Song', or using the 'Search' functionality.</p>
<h2><a class="anchor" aria-hidden="true" name="exercise-1-creating-a-custom-command"></a><a href="#exercise-1-creating-a-custom-command" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exercise 1: Creating a Custom Command</h2>
<p>For this first exercise we are going to create a custom command for the search functionality.</p>
<ol>
<li>Create a new spec file
In your Cypress Integration folder create a new spec file called <code>cc_exercise1_spec.js</code> and copy in the code below.</li>
</ol>
<pre><code class="hljs">describe('Search actions', function () {
    
    it('should search on song title', function () {

      cy.visit('http<span class="hljs-symbol">://localhost</span>:<span class="hljs-number">8080</span>/')<span class="hljs-comment">;</span>
      cy.search('blood')<span class="hljs-comment">;</span>
      cy.get('.song-title').should('contain','In the blood')<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>Notice that we are calling a custom search function cy.search here. This function can be called as any other command in Cypress. Like <code>cy.get()</code> we can now simply invoke the custom command by typing <code>cy.&lt;custom command&gt;</code>. In this case our custom command is called search and it takes a string to search on as an argument.</p>
<ol start="2">
<li>Create a new custom command
Custom commands are stored in the <code>cypress/support/</code> folder. A good place to define your custom commands is in the <code>cypress/support/commands.js</code> file. You can create several custom commands in one file, but it is also possible to create separate files to group logical commands together. If you do this, you need to add these files to the <code>cypress/support/index.js</code> file. This file is loaded before any of the tests are run, ensuring your reusable functions are available for all your tests.</li>
</ol>
<p>We are now going to create the needed search function in the <code>cypress/support/commands.js</code> file. You can use the code below.</p>
<pre><code class="hljs">Cypress.Commands.add(<span class="hljs-string">"search"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(input)</span> {</span>
    cy
        .get(<span class="hljs-string">'input[aria-label="</span>Search by song title, artist, album, <span class="hljs-built_in">or</span> genre<span class="hljs-string">"]'</span>)
        .<span class="hljs-built_in">type</span>(input)
        .<span class="hljs-built_in">type</span>(<span class="hljs-string">'{enter}'</span>);
});
</code></pre>
<p>This small function gets the text field on the songs page, selects the text field for input and types in the input that you define when you call this function.
It also uses <code>.type(&quot;{enter}&quot;);</code> to simulate the push of the Enter key on the keyboard, executing the search.</p>
<ol start="3">
<li><p>Run the test
Save all the changes you've made and open the Cypress UI (<code>node_modules/.bin/cypress open</code>). You should now see your newly created spec file.
<img src="../img/cc_exercise1_screenshot1.png" alt="Exercise1specfile" title="Exercise 1: Cypress UI"></p></li>
<li><p>Create a variation
Now create a new test in your <code>cc_exercise1_spec.js</code> spec file that:</p>
<ol>
<li>Searches on a artist name in your database</li>
<li>Asserts that the artist has been found</li>
</ol></li>
<li><p>Create a variation
Add another test in your <code>cc_exercise1_spec.js</code> spec file that:</p>
<ol>
<li>Searches on an unknown artist</li>
<li>Asserts that the correct error message is shown</li>
</ol>
<p>Note: For step 4 and 5 you need to reuse the custom command you've just created and only add a new test function.</p></li>
</ol>
<h2><a class="anchor" aria-hidden="true" name="exercise-2-create-a-custom-command-for-login"></a><a href="#exercise-2-create-a-custom-command-for-login" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exercise 2: Create a custom command for Login</h2>
<p>Now do it yourself! Create a new custom command for the Login functionality.
You need to cover the following criteria:</p>
<ol>
<li>Your starting position should be from the baseurl of the application.</li>
<li>Create a custom command that performs a succesful login.</li>
<li>Create a minimum of one assertion to verify that uou are indeed logged in.</li>
<li>Add this reusable function to each test you've created thus far in this workshop. (hint: use the before step functionality).</li>
<li>Re-use this function with different data, including a failed login scenario.</li>
</ol>
<h3><a class="anchor" aria-hidden="true" name="if-you-get-stuck"></a><a href="#if-you-get-stuck" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>If you get stuck</h3>
<p>You can find more examples <a href="https://docs.cypress.io/api/cypress-api/custom-commands.html#Syntax">here</a> to help you.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="edit_song.html">← Editing a song</a><a class="docs-next button" href="commandline.html">Using the commandline →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/cypress-meetup-2018/" class="nav-home"><img src="/cypress-meetup-2018/img/cy.png" alt="Cypress.io &amp; Javascript basics" width="66" height="58"/></a><div><h5>Meetup group</h5><a href="https://www.meetup.com/Test-Masters-Series/" target="_blank">Test Masters Series</a><a href="https://xebia.com/test-automation-quality" target="_blank">Xebia</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/cypress" target="_blank">Stack Overflow</a><a href="https://gitter.im/cypress-io/cypress" target="_blank">Gitter</a><a href="https://twitter.com/Cypress_io" target="_blank">Twitter</a></div><div><h5>More</h5><a href="https://cypress.io" target="_blank">Cypress.io website</a><a href="https://github.com/cypress-io/cypress">GitHub</a><a class="github-button" href="https://github.com/xebia/cypress-meetup-2018/" data-icon="octicon-star" data-count-href="/cypress-io/cypress/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://www.xebia.com" target="_blank" class="fbOpenSource"><img src="/cypress-meetup-2018/img/xebia-logo-bw.png" alt="Xebia logo" width="170" height="45"/></a><section class="copyright">Software Quality &amp; Test Automation</section></footer></div></body></html>